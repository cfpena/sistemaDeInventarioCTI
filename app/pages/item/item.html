

<nav class="light-blue darken-4" >
  <div class="nav-wrapper navbar-fixed" >
    <a href="#" (click)="openMenu()"data-activates="nav-mobile" class="button-collapse show-on-large left"><i class="material-icons left">menu</i></a>
    <a href="#!" class="brand-logo">{{title}}</a>
  </div>
</nav>
<!--Tabla de ítems-->
<ion-content>
  <div *ngIf="template=='null'">
    <!--Búsqueda por codigo o nombre-->
    <div class="row">
      <div class="col l1 m2 s4 offset-l9 offset-m7 " >
        <div class="input-field">
          <select materialize="material_select" [materializeSelectOptions]="selectOptions" [(ngModel)]="busqueda.tipo">
            <option *ngFor="let tiposBusqueda of tiposBusquedas" [value]="tiposBusqueda" >{{tiposBusqueda}}</option>
          </select>
        </div>
      </div>
      <div class="col l2 m3 s8">
        <div class="input-field">
          <input (keyup)="buscar()" type="text" id="identificacion"  [(ngModel)]="busqueda.valor">
          <label class="black-text active" for="identificacion">Búsqueda</label>
        </div>
      </div>
    </div>

    <!--Tabla de items-->
    <table  materialize class="centered table centered striped" style="font-size: 15px">
      <thead>
        <tr>
          <th></th><!--para el select-->
          <!--<th></th> para la imagen-->
          <th data-field="id">Código</th>
          <th data-field="nombre">Nombre</th>
          <th data-field="cantidad">Cantidad</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor = "let item of items">
          <td>
            <!-- evento change y atributo por defecto checked false, se agrega como id el id de la persona
            para luego saber que checkbox le pertenece a cada persona-->
            <input (change)="select(item)" id={{item.id}} type="checkbox" class="filled-in"/>
            <label attr.for="{{item.id}}"></label>
          </td>
          <!--foto del ítem
          <td>
            <a materialize="leanModal" [materializeParams]="[{dismissible: true}]" class='modal-trigger' href='#demoModal'><img src="{{item.Images}}"  alt="" class="circle responsive-img "></a>
          </td>-->
          <td >{{item.Codigo}}</td>
          <td>{{item.Nombre}}</td>
          <td>{{item.Stock}}</td>
          <td>
            <a class="button-collapse" (click)="goModificar(item)"><i class="material-icons left">mode_edit</i></a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</ion-content>

<!--MODAL QUE EXPANDE FOTO AL TOCAR
<!--Modal Structure-->
<div materialize id="demoModal" class=" modal modal-fixed-footer" >
  <div class="modal-content" >
    <div class="row">
      <div class="col s12 m7 l7">
        <img id="img" class="materalboxed" style="margin:0 auto;"  src="http://upload.wikimedia.org/wikipedia/commons/3/33/Resistencia_electrica.jpg">
      </div>
    </div>
  </div>
</div>
<style>
#demoModal{
  width:400px;
  height:400px;
}
#img{
  width:800;
  margin:0 auto;
}
</style>
<!--Botón flotante para eliminar y agregar nuevo ítem-->
<div *ngIf="template=='null'">
  <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large orange darken-1">
      <i class="large material-icons">settings</i>
    </a>
    <ul>
      <li><a (click)="eliminar()" class="btn-floating red"><i class="material-icons">delete</i></a></li>
      <li><a (click)="goCrearItem()" class="btn-floating blue"><i class="material-icons">add</i></a></li>
    </ul>
  </div>
</div>
<!--Layout para crear un nuevo ítem-->
<div *ngIf="template=='crear'" style="overflow: scroll;">
  <div id="nuevo_item" class="section">
    <div class="container" style="padding-top: 90px">
      <div class="row">
        <div class="card-panel hoverable card-action white">
          <div class="card-content black-text">
            <span class="card-title " style="font-size: 30px">Nuevo Ítem</span>

            <!--Paneles -->
            <!--<div class="card blue-grey lighten-5 ">
            <div class="card-panel teal lighten-2 black-text ">Nuevo Ítem</div>
            <div class="card-content black-text">-->

            <!--Botón para subir foto-->
            <div class="row">
              <div class="col l3 m3 s12 offset-l9 offset-m9">
                <form action="#">
                  <div class="file-field input-field">
                    <div class="btn">
                      <i class="material-icons center">camera_enhance</i>
                      <input type="file" >
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text" [(ngModel)]="itemNuevo.Images">
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <!--campos de texto codigo , nombre, descripción, marca, modelo, cantidad-->
            <div class="row">
              <div class="col s12 m6 l6">
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_codigo" type="text" class="validate" minlength="10" maxlength="10" pattern = "[0-9]*" [(ngModel)]="itemNuevo.Codigo" >
                  <label for="icon_codigo"> *  Código</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_nombre" type="text" class="validate" minlength="2" maxlength="15" pattern = "[a-zA-Z]*" [(ngModel)]="itemNuevo.Nombre">
                  <label for="icon_nombre"> *  Nombre</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_descripcion" type="text" class="validate" minlength="5" maxlength="30"  [(ngModel)]="itemNuevo.Descripcion">
                  <label for="icon_descripcion"> *  Descripción</label>
                </div>
              </div>
              <div class="col s12 m6 l6">
                <div class="input-field ">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_marca" type="tel" class="validate"  minlength="5" maxlength="10"  [(ngModel)]="itemNuevo.Marca" >
                  <label for="icon_marca">   Marca</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_modelo" type="tel" class="validate"  minlength="5" maxlength="10"  [(ngModel)]="itemNuevo.Modelo">
                  <label for="icon_modelo">   Modelo</label>
                </div>
                <div class="row">
                  <div class="col l3 m6 s11 offset-l1 offset-m1 offset-s1">
                    <form action="#">
                      <p>
                        <input type="checkbox"  id="test5"   [(ngModel)]="itemNuevo.Is_dispositivo" />
                        <label for="test5">Dispositivo</label>
                      </p>
                    </form>
                  </div>
                  <div  class="col l5 m5 s12">
                    <div class="input-field">
                      <input id="icon_cantidad" type="tel" class="validate"  minlength="1" maxlength="2" pattern = "[0-9]*" [(ngModel)]="itemNuevo.Stock">
                      <label for="icon_cantidad"> *  Cantidad</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-action">
            <a (click)="crear()" class="btn waves-effect waves-light right"  style="font-size: 17px">Crear
              <i class="material-icons right">send</i>
            </a>
            <h6>(*) Campos obligatorios</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="section">
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
      <a (click)="cancelar()" class="btn-floating btn-large waves-effect waves-light red right">
        <i class="material-icons">clear</i>
      </a>
    </div>
  </div>
</div>


<div *ngIf="template=='modificar'" style="overflow: scroll;">
  <!--modificar item-->
  <div id="modificar_item" class="section" >
    <div class="container" style="padding-top: 90px">
      <div class="row">
        <div class="card-panel hoverable card-action white">
          <div class="card-content black-text">
            <span class="card-title" style="font-size: 30px">Modificar Ítem</span>
            <div style="padding-top: 18px"></div> <!--para separar el titulo de los inputs"-->
            <!--Botón para subir foto-->
            <div class="row">
              <div class="col l3 m3 s12 offset-l9 offset-m9">
                <form action="#">
                  <div class="file-field input-field">
                    <div class="btn">
                      <i class="material-icons center">camera_enhance</i>
                      <input type="file">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text" [(ngModel)]="itemModificar.Images">
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <div class="row">
              <div class="col s12 m6 l6">
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_codigo" type="text" class="validate" minlength="10" maxlength="10" pattern = "[0-9]*" [(ngModel)]="itemModificar.Codigo" >
                  <label for="icon_codigo" class="active"> *  Código</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_nombre" type="text" class="validate" minlength="2" maxlength="15" pattern = "[a-zA-Z]*" [(ngModel)]="itemModificar.Nombre">
                  <label for="icon_nombre" class="active"> * Nombre</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_descripcion" type="text" class="validate" minlength="5" maxlength="30"  [(ngModel)]="itemModificar.Descripcion">
                  <label for="icon_descripcion" class="active"> *  Descripción</label>
                </div>
              </div>
              <div class="col s12 m6 l6">
                <div class="input-field ">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_marca" type="tel" class="validate"  minlength="5" maxlength="10"  [(ngModel)]="itemModificar.Marca" >
                  <label for="icon_marca" class="active">Marca</label>
                </div>
                <div class="input-field">
                  <i class="material-icons prefix">label_outline</i>
                  <input id="icon_modelo" type="tel" class="validate"  minlength="5" maxlength="10"  [(ngModel)]="itemModificar.Modelo">
                  <label for="icon_modelo" class="active">Modelo</label>
                </div>
                <div class="row">
                  <div class="col l6 m6 s12">
                    <div class="input-field">
                      <i class="material-icons prefix">label_outline</i>
                      <input id="icon_cantidad" type="tel" class="validate"  minlength="1" maxlength="2" pattern = "[0-9]*" [(ngModel)]="itemModificar.Stock">
                      <label for="icon_cantidad" class="active"> *  Cantidad</label>
                    </div>
                  </div>
                  <div class="col l6 m6 s11 offset-s1">
                    <form action="#">
                      <p>
                        <input type="checkbox" id="test01" [(ngModel)]="itemModificar.Is_dispositivo"/>
                        <label for="test01">Dispositivo</label>
                      </p>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-action">
            <a (click)="modificar()" class="btn waves-effect waves-light center"  style="font-size: 17px">Guardar
              <i class="material-icons right">send</i>
            </a>
            <h6>(*) Campos obligatorios</h6>
          </div>
        </div>
        <!--</form>-->
      </div>
    </div>
  </div>
  <!--boton para cancelar-->
  <div class="section">
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
      <a (click)="cancelar()" class="btn-floating btn-large waves-effect waves-light red right">
        <i class="material-icons">clear</i>
      </a>
    </div>
  </div>
</div>
